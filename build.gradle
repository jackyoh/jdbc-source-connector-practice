import java.io.File;
import java.nio.file.Files;
import java.nio.file.FileSystems;
import java.nio.file.Paths;

apply plugin: 'java'

sourceCompatibility = 1.8

tasks.withType(JavaCompile) {
   options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
   options.encoding = 'UTF-8'
}

repositories {
   mavenCentral()
}

dependencies {
   compile group: 'org.apache.kafka', name: 'kafka-clients', version: '1.1.0'
   compile group: 'org.apache.kafka', name: 'kafka_2.12', version: '1.1.0'
   compile group: 'org.apache.kafka', name: 'connect-api', version: '1.1.0'
   compile group: 'org.postgresql', name: 'postgresql', version: '42.2.4'
}


jar {
  configurations.compile.each { File path ->
    String buildJarFolder = "build/lib"
    if(!new File(buildJarFolder).exists()){
      new File(buildJarFolder).mkdirs();
    }
    String newJarFilePath = buildJarFolder + "/" + path.name
    if(!new File(newJarFilePath).exists()){
      Files.copy(path.toPath(), FileSystems.getDefault().getPath(newJarFilePath))
    }
  }
}
